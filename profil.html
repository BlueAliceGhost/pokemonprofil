<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil de personnalité</title>
    <style>
        body {
            background-color: #1a1a1a; /* Fond galaxie sombre */
            color: #fff;
            font-family: Arial, sans-serif;
        }
        .container {
            text-align: center;
            margin-top: 50px;
        }
        #validate {
            background-color: #4CAF50; /* Style du bouton */
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }
        #validate:disabled {
            background-color: #9e9e9e; /* Bouton désactivé */
        }
        .likert {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .likert label {
            margin: 0 5px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Vous avez choisi Bulbizarre, voici votre profil de personnalité</h1>
        <p>Vous êtes une personne déterminée, mais parfois, vous avez besoin de temps pour prendre des décisions importantes. Vous aimez être entouré de personnes de confiance et vous avez un fort désir d’être reconnu pour vos talents. Parfois, vous pouvez vous laisser emporter par vos émotions, mais vous avez la capacité de rebondir rapidement.</p>
        
        <p>Dans quelle mesure cette description correspond-elle à votre personnalité ?</p>

        <div class="likert">
            <input type="radio" id="0" name="likert" value="0"><label for="0">0</label>
            <input type="radio" id="1" name="likert" value="1"><label for="1">1</label>
            <input type="radio" id="2" name="likert" value="2"><label for="2">2</label>
            <input type="radio" id="3" name="likert" value="3"><label for="3">3</label>
            <input type="radio" id="4" name="likert" value="4"><label for="4">4</label>
            <input type="radio" id="5" name="likert" value="5"><label for="5">5</label>
            <input type="radio" id="6" name="likert" value="6"><label for="6">6</label>
            <input type="radio" id="7" name="likert" value="7"><label for="7">7</label>
            <input type="radio" id="8" name="likert" value="8"><label for="8">8</label>
            <input type="radio" id="9" name="likert" value="9"><label for="9">9</label>
            <input type="radio" id="10" name="likert" value="10"><label for="10">10</label>
        </div>

        <br>

        <button id="validate" disabled>Valider</button>
    </div>

    <script>
        document.getElementById('validate').addEventListener('click', function() {
    const selected = document.querySelector('input[name="likert"]:checked');
    if (!selected) {
        alert("Veuillez sélectionner une valeur avant de valider.");
        return;
    }

    const score = selected.value;
    const starter = localStorage.getItem("starterChoisi") || "Néant";
    const condition = localStorage.getItem("condition") || "Contrôle";

    fetch("https://script.google.com/macros/s/AKfycbyxvwuv3x07knRSh2Abx6KD0vPQgqUWb__Ib6X81qTtaM4iXypQfDG1WktF2vJ94VcR/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            consentement: "Oui",
            condition: condition,
            starter: starter,
            score: score
        })
    })
    .then(response => response.text())
    .then(data => {
        console.log("Réponse de Google Apps Script:", data);
        if (data.includes("success")) {
            window.location.href = "explication.html"; // Redirection si succès
        } else {
            alert("Problème avec l'envoi des données. Réponse reçue : " + data);
        }
    })
    .catch(error => {
        console.error("Erreur lors de l'envoi des données:", error);
        alert("Une erreur réseau est survenue, regarde la console.");
    });
});

    </script>

</body>
</html>
